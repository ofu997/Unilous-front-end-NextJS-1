{"ast":null,"code":"var _jsxFileName = \"/home/oliver/Documents/projects/UnilousFE/components/post/PostSmall.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport { useMutation } from '@apollo/react-hooks';\nimport { REMOVE_SAVED_POST } from '../../src/schemas/mutations';\nimport { setCurrentUserPosts, setCurrentUserSP } from '../../redux/reducers/currentUser';\nimport { setAlert, resetAlert } from '../../redux/reducers/alertNotif';\nimport { triggerAlert, palletteGenerator } from '../../src/functions/functions';\nimport PT from '../../styles/post.module.css';\n\nconst PostSmall = props => {\n  _s();\n\n  const handleError = e => {\n    console.log(e);\n  }; // const [ deletePostMutation ] = useMutation(DELETE_POST, {\n  //     onError: handleError\n  // })\n\n\n  const [removeSPMutation] = useMutation(REMOVE_SAVED_POST, {\n    onError: handleError\n  });\n  const p = props.post;\n  const user = props.post.user ? props.post.user.username : props.user;\n  const pallette = palletteGenerator(p.color).colorPallette; // const handleRemove = async () => {\n  //     const result = await deletePostMutation({\n  //         variables: {postId: props.post._id}\n  //     })\n  //     if (result) {\n  //         props.setCurrentUserPosts(props.currentUser.posts.filter(p => p._id !== props.post._id))\n  //         triggerAlert('danger', `deleted $: deleted post '${p.title}'`, props.setAlert, props.resetAlert)\n  //     }\n  // }\n\n  const handleSaveRemove = async () => {\n    const result = await removeSPMutation({\n      variables: {\n        user: props.currentUser._id,\n        postId: p._id\n      }\n    });\n\n    if (result) {\n      const newSavedPosts = props.currentUser.savedPosts.filter(post => post._id !== p._id);\n      props.setCurrentUserSP(newSavedPosts);\n      triggerAlert('danger', `unfollowed$: unfollowed post '${p.title}'`, props.setAlert, props.resetAlert);\n    }\n  };\n\n  if (props.type === 'saved') {\n    return __jsx(\"div\", {\n      className: PT.postWrapperSm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: PT.postColorIndicator,\n      style: {\n        backgroundColor: pallette.color\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      className: PT.postContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: PT.postHeader,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }\n    }, __jsx(Link, {\n      href: \"/user/[username]\",\n      as: `/user/${encodeURIComponent(user)}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }\n    }, __jsx(\"a\", {\n      className: `${PT.PHUser} neutralize-link`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 29\n      }\n    }, __jsx(\"img\", {\n      className: PT.PHUIcon,\n      src: \"/svg/userB.svg\",\n      alt: \"user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 33\n      }\n    }), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 33\n      }\n    }, user)))), __jsx(Link, {\n      href: \"/post/[title]\",\n      as: `/post/${encodeURIComponent(p.title)}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }\n    }, __jsx(\"a\", {\n      className: \"neutralize-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 25\n      }\n    }, __jsx(\"h3\", {\n      className: PT.postTitle,\n      style: {\n        marginBottom: '7px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 29\n      }\n    }, p.title)))), __jsx(\"div\", {\n      onClick: () => handleSaveRemove(),\n      className: PT.postSmRemove,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, \"x\"));\n  }\n\n  if (props.currentUser) {\n    if (user === props.currentUser.username) {\n      return __jsx(\"div\", {\n        className: PT.postWrapperSm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        className: PT.postColorIndicator,\n        style: {\n          backgroundColor: pallette.color\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }\n      }), __jsx(\"div\", {\n        className: PT.postContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }, __jsx(\"div\", {\n        className: PT.postHeader,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }\n      }, __jsx(Link, {\n        href: \"/user/[username]\",\n        as: `/user/${encodeURIComponent(user)}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 29\n        }\n      }, __jsx(\"a\", {\n        className: `${PT.PHUser} neutralize-link`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 33\n        }\n      }, __jsx(\"img\", {\n        className: PT.PHUIcon,\n        src: \"/svg/userB.svg\",\n        alt: \"user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 37\n        }\n      }), __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 37\n        }\n      }, user)))), __jsx(Link, {\n        href: \"/post/[title]\",\n        as: `/post/${encodeURIComponent(p.title)}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }\n      }, __jsx(\"a\", {\n        className: \"neutralize-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 29\n        }\n      }, __jsx(\"h3\", {\n        className: PT.postTitle,\n        style: {\n          marginBottom: '7px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 33\n        }\n      }, p.title)))));\n    }\n  }\n\n  return __jsx(\"div\", {\n    className: PT.postWrapperSm,\n    style: {\n      gridTemplateColumns: '8px auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: PT.postColorIndicator,\n    style: {\n      backgroundColor: pallette.color\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: PT.postContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: PT.postHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, __jsx(Link, {\n    href: \"/user/[username]\",\n    as: `/user/${encodeURIComponent(user)}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    className: `${PT.PHUser} neutralize-link`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    className: PT.PHUIcon,\n    src: \"/svg/userB.svg\",\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, user)))), __jsx(Link, {\n    href: \"/post/[title]\",\n    as: `/post/${encodeURIComponent(p.title)}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    className: \"neutralize-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, __jsx(\"h3\", {\n    className: PT.postTitle,\n    style: {\n      marginBottom: '7px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, p.title)))));\n};\n\n_s(PostSmall, \"2tJMy7tOAmJhwwlV7eDeeeL7ZiY=\", false, function () {\n  return [useMutation];\n});\n\n_c = PostSmall;\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setCurrentUserPosts,\n  setCurrentUserSP,\n  setAlert,\n  resetAlert\n})(PostSmall);\n\nvar _c;\n\n$RefreshReg$(_c, \"PostSmall\");","map":{"version":3,"sources":["/home/oliver/Documents/projects/UnilousFE/components/post/PostSmall.js"],"names":["React","connect","Link","useMutation","REMOVE_SAVED_POST","setCurrentUserPosts","setCurrentUserSP","setAlert","resetAlert","triggerAlert","palletteGenerator","PT","PostSmall","props","handleError","e","console","log","removeSPMutation","onError","p","post","user","username","pallette","color","colorPallette","handleSaveRemove","result","variables","currentUser","_id","postId","newSavedPosts","savedPosts","filter","title","type","postWrapperSm","postColorIndicator","backgroundColor","postContainer","postHeader","encodeURIComponent","PHUser","PHUIcon","postTitle","marginBottom","postSmRemove","gridTemplateColumns","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Link from 'next/link'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { REMOVE_SAVED_POST } from '../../src/schemas/mutations'\r\nimport { setCurrentUserPosts, setCurrentUserSP } from '../../redux/reducers/currentUser'\r\nimport { setAlert, resetAlert } from '../../redux/reducers/alertNotif'\r\nimport { triggerAlert, palletteGenerator } from '../../src/functions/functions'\r\nimport PT from '../../styles/post.module.css'\r\n\r\nconst PostSmall = (props) => {\r\n    const handleError = (e) => {\r\n        console.log(e)\r\n    }\r\n    // const [ deletePostMutation ] = useMutation(DELETE_POST, {\r\n    //     onError: handleError\r\n    // })\r\n    const [ removeSPMutation ] = useMutation(REMOVE_SAVED_POST, {\r\n        onError: handleError\r\n    })\r\n    const p = props.post\r\n    const user = props.post.user ? props.post.user.username : props.user\r\n    const pallette = palletteGenerator(p.color).colorPallette\r\n    // const handleRemove = async () => {\r\n    //     const result = await deletePostMutation({\r\n    //         variables: {postId: props.post._id}\r\n    //     })\r\n    //     if (result) {\r\n    //         props.setCurrentUserPosts(props.currentUser.posts.filter(p => p._id !== props.post._id))\r\n    //         triggerAlert('danger', `deleted $: deleted post '${p.title}'`, props.setAlert, props.resetAlert)\r\n    //     }\r\n    // }\r\n    const handleSaveRemove = async () => {\r\n        const result = await removeSPMutation({\r\n            variables: {\r\n                user: props.currentUser._id,\r\n                postId: p._id\r\n            }\r\n        })\r\n        if (result) {\r\n            const newSavedPosts = props.currentUser.savedPosts.filter(post => post._id !== p._id)\r\n            props.setCurrentUserSP(newSavedPosts)\r\n            triggerAlert('danger', `unfollowed$: unfollowed post '${p.title}'`, props.setAlert, props.resetAlert)\r\n        }\r\n    }\r\n    \r\n    if (props.type === 'saved') {\r\n        return (\r\n            <div className={PT.postWrapperSm}>\r\n                <div className={PT.postColorIndicator} style={{backgroundColor: pallette.color}} />\r\n                <div className={PT.postContainer}>\r\n                    <div className={PT.postHeader}>\r\n                        <Link href=\"/user/[username]\" as={`/user/${encodeURIComponent(user)}`}>\r\n                            <a className={`${PT.PHUser} neutralize-link`}>\r\n                                <img className={PT.PHUIcon} src=\"/svg/userB.svg\" alt=\"user\" />\r\n                                <div>{user}</div>\r\n                            </a>\r\n                        </Link>\r\n                    </div>\r\n                    <Link href=\"/post/[title]\" as={`/post/${encodeURIComponent(p.title)}`} >\r\n                        <a className=\"neutralize-link\">\r\n                            <h3 className={PT.postTitle} style={{marginBottom: '7px'}}>{p.title}</h3>\r\n                        </a>\r\n                    </Link>\r\n                </div>\r\n                <div onClick={() => handleSaveRemove()} className={PT.postSmRemove}>x</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (props.currentUser) {\r\n        if (user === props.currentUser.username) {\r\n            return (\r\n                <div className={PT.postWrapperSm}>\r\n                    <div className={PT.postColorIndicator} style={{backgroundColor: pallette.color}} />\r\n                    <div className={PT.postContainer}>\r\n                        <div className={PT.postHeader}>\r\n                            <Link href=\"/user/[username]\" as={`/user/${encodeURIComponent(user)}`} >\r\n                                <a className={`${PT.PHUser} neutralize-link`}>\r\n                                    <img className={PT.PHUIcon} src=\"/svg/userB.svg\" alt=\"user\" />\r\n                                    <div>{user}</div>\r\n                                </a>\r\n                            </Link>\r\n                        </div>\r\n                        <Link href=\"/post/[title]\" as={`/post/${encodeURIComponent(p.title)}`} >\r\n                            <a className=\"neutralize-link\">\r\n                                <h3 className={PT.postTitle} style={{marginBottom: '7px'}}>{p.title}</h3>\r\n                            </a>\r\n                        </Link>\r\n                    </div>\r\n                    {/* <div onClick={() => handleRemove()} className=\"post-sm-remove\">x</div> */}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={PT.postWrapperSm} style={{gridTemplateColumns: '8px auto'}}>\r\n            <div className={PT.postColorIndicator} style={{backgroundColor: pallette.color}} />\r\n            <div className={PT.postContainer}>\r\n                <div className={PT.postHeader}>\r\n                    <Link href=\"/user/[username]\" as={`/user/${encodeURIComponent(user)}`}>\r\n                        <a className={`${PT.PHUser} neutralize-link`}>\r\n                            <img className={PT.PHUIcon} src=\"/svg/userB.svg\" alt=\"user\" />\r\n                            <div>{user}</div>\r\n                        </a>\r\n                    </Link>\r\n                </div>\r\n                <Link href=\"/post/[title]\" as={`/post/${encodeURIComponent(p.title)}`}>\r\n                    <a className=\"neutralize-link\">\r\n                        <h3 className={PT.postTitle} style={{marginBottom: '7px'}}>{p.title}</h3>\r\n                    </a>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n        currentUser: state.currentUser,\r\n\t}\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    { setCurrentUserPosts, setCurrentUserSP, setAlert, resetAlert }\r\n)(PostSmall)"]},"metadata":{},"sourceType":"module"}