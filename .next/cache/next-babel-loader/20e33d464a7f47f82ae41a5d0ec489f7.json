{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport UserContainer from './UserContainer';\nimport NB from '../../styles/navBar.module.css';\nimport Link from 'next/link';\nimport SkillSugg from '../text-field/SkillSugg';\nimport UserNotifList from '../user/utilities/UserNotifList';\nimport UserSP from '../user/utilities/UserSP';\nimport SignIn from '../user/form/SignIn';\nimport Register from '../user/form/Register';\nimport { clearToken } from '../../redux/reducers/token';\nimport { resetAlert } from '../../redux/reducers/alertNotif';\nimport { bindActionCreators } from 'redux';\nimport Router from 'next/router';\n\nconst NavBar = props => {\n  const {\n    0: utilityShown,\n    1: setUtilityShown\n  } = useState(null);\n  const {\n    0: menuItemShown,\n    1: setMenuItemShown\n  } = useState(null);\n\n  const changeUtility = name => {\n    setMenuItemShown(null);\n    if (name === utilityShown) setUtilityShown(null);else setUtilityShown(name);\n  };\n\n  const changeMenuItem = item => {\n    if (item === menuItemShown) setMenuItemShown(null);else setMenuItemShown(item);\n  };\n\n  const linkToPush = `/results/${encodeURIComponent(props.query)}`;\n\n  const enterQuery = () => {\n    Router.push(linkToPush);\n  };\n\n  const handleKeyPress = event => {\n    if (event.key === 'Enter') {\n      enterQuery();\n    }\n  };\n\n  const onSuggestionClicked = skill => {\n    const splitQuery = props.query.split(' ');\n    const newQuery = splitQuery.length === 1 ? `${skill} ` : `${splitQuery.slice(0, -1).join(' ')} ${skill} `;\n    props.onQueryChange({\n      target: {\n        value: newQuery\n      }\n    });\n  };\n\n  const handleLogout = () => {\n    localStorage.clear();\n    props.clearToken();\n  };\n\n  const menuStyle = menuItemShown ? {\n    borderBottomColor: '#282828'\n  } : null;\n  const pendingNotifStats = props.currentUser && props.currentUser.pendingNotifications > 0 ? [NB.PNBubble, props.currentUser.pendingNotifications] : [null, null];\n\n  const ShowInSubNav = () => {\n    const moreItemButton = menuItemShown === 'more' ? __jsx(\"img\", {\n      src: \"/svg/moreW.svg\",\n      onClick: () => changeMenuItem('more'),\n      className: NB.menuItemSelected,\n      alt: \"more\"\n    }) : __jsx(\"img\", {\n      src: \"/svg/moreSB.svg\",\n      onClick: () => changeMenuItem('more'),\n      className: NB.menuItem,\n      alt: \"more\"\n    });\n\n    if (utilityShown === 'menu') {\n      if (props.token) {\n        // const allItems = [\n        //     {name: 'notifications', iconB: bellIconB, iconW: bellIconW},\n        //     {name: 'following', iconB: heartIconB, iconW: heartIconW},\n        // ]\n        const notifItemButton = menuItemShown === 'notifications' ? __jsx(\"div\", {\n          onClick: () => changeMenuItem('notifications'),\n          className: `${NB.menuItemSelected} ${NB.PNContainer}`\n        }, __jsx(\"img\", {\n          src: bellIconW,\n          className: NB.notificationItem,\n          alt: 'notifications',\n          key: `UO${'notifications'}`\n        }), __jsx(\"div\", {\n          className: pendingNotifStats[0]\n        }, pendingNotifStats[1])) : __jsx(\"div\", {\n          onClick: () => changeMenuItem('notifications'),\n          className: `${NB.menuItem} ${NB.PNContainer}`\n        }, __jsx(\"img\", {\n          src: \"/svg/bellB.svg\",\n          className: NB.notificationItem,\n          alt: 'notifications',\n          key: `UO${'notifications'}`\n        }), __jsx(\"div\", {\n          className: pendingNotifStats[0]\n        }, pendingNotifStats[1]));\n        const followingItemButton = menuItemShown === 'following' ? __jsx(\"img\", {\n          src: \"/svg/heartW.svg\",\n          onClick: () => changeMenuItem('following'),\n          className: NB.menuItemSelected,\n          alt: 'following',\n          key: `UO${'following'}`\n        }) : __jsx(\"img\", {\n          src: \"/svg/heartB.svg\",\n          onClick: () => changeMenuItem('following'),\n          className: NB.menuItem,\n          alt: 'following',\n          key: `UO${'following'}`\n        });\n        return __jsx(\"div\", {\n          className: NB.navBarSubContainerM,\n          style: menuStyle\n        }, __jsx(Link, {\n          href: \"/post-form/\",\n          onClick: () => changeMenuItem(null)\n        }, __jsx(\"a\", {\n          className: NB.menuItem,\n          style: {\n            padding: 0,\n            margin: 0\n          }\n        }, __jsx(\"img\", {\n          src: \"/svg/plusB.svg\",\n          className: NB.menuItem,\n          alt: \"add project\"\n        }))), __jsx(Link, {\n          href: \"user/[username]\",\n          as: `/user/${props.currentUser.username}`,\n          onClick: () => changeMenuItem(null)\n        }, __jsx(\"a\", {\n          className: NB.menuItem,\n          style: {\n            padding: 0,\n            margin: 0\n          }\n        }, __jsx(\"img\", {\n          src: userIcon,\n          className: \"menu-item\",\n          alt: \"user page\"\n        }))), notifItemButton, followingItemButton, __jsx(\"img\", {\n          src: exitIcon,\n          onClick: () => handleLogout(),\n          className: NB.menuItem,\n          alt: \"log out\"\n        }), moreItemButton);\n      }\n\n      const allItems = ['sign in', 'register'];\n      const modalItemButtons = allItems.map(i => menuItemShown === i ? __jsx(\"h3\", {\n        onClick: () => changeMenuItem(i),\n        className: NB.menuItemSelected,\n        key: `MI${i}`\n      }, i) : __jsx(\"h3\", {\n        onClick: () => changeMenuItem(i),\n        className: NB.menuItem,\n        key: `MI${i}`\n      }, i));\n      return __jsx(\"div\", {\n        className: `${NB.navBarSubContainerM} ${NB.loginBar}`,\n        style: menuStyle\n      }, modalItemButtons, moreItemButton);\n    }\n\n    return null;\n  };\n\n  const MenuItemToShow = () => {\n    if (menuItemShown === 'sign in') {\n      return __jsx(\"div\", {\n        className: NB.menuModalContainer\n      }, __jsx(SignIn, {\n        noBG: true,\n        changeMenuItem: changeMenuItem\n      }));\n    }\n\n    if (menuItemShown === 'register') {\n      return __jsx(\"div\", {\n        className: NB.menuModalContainer\n      }, __jsx(Register, {\n        noBG: true,\n        changeMenuItem: changeMenuItem\n      }));\n    }\n\n    if (menuItemShown === 'notifications') {\n      return __jsx(\"div\", {\n        className: NB.menuModalContainer\n      }, __jsx(\"h2\", null, \"notifications\"), __jsx(UserNotifList, null));\n    }\n\n    if (menuItemShown === 'following') {\n      return __jsx(\"div\", {\n        className: NB.menuModalContainer\n      }, __jsx(\"h2\", null, \"saved posts\"), __jsx(UserSP, null));\n    }\n\n    if (menuItemShown === 'more') {\n      return __jsx(\"div\", {\n        className: NB.menuModalContainer\n      }, __jsx(Link, {\n        href: \"/contact/\"\n      }, __jsx(\"a\", {\n        className: \"neutralize-link\"\n      }, __jsx(\"h1\", {\n        className: NB.moreLink\n      }, \"contact us\"))));\n    }\n\n    return null;\n  };\n\n  const showWhenSB = utilityShown === 'search' ? {\n    display: 'block'\n  } : {\n    display: 'none'\n  };\n  const alertBarStyle = props.alertNotif.color ? {\n    backgroundColor: props.alertNotif.color,\n    color: props.alertNotif.textColor\n  } : {\n    display: 'none',\n    backgroundColor: props.alertNotif.color,\n    color: props.alertNotif.textColor\n  };\n  return __jsx(\"div\", null, __jsx(\"div\", {\n    className: `${NB.navContainer} HWM`\n  }, __jsx(\"div\", {\n    className: NB.navBarContainer\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    className: NB.iconContainer\n  }, __jsx(\"img\", {\n    src: \"/svg/logo/logoB.svg\",\n    alt: \"icon\",\n    className: NB.navBarIcon\n  }))), __jsx(\"div\", {\n    className: NB.searchBar\n  }, __jsx(Link, {\n    href: linkToPush,\n    onClick: () => enterQuery()\n  }, __jsx(\"a\", {\n    className: `neutralize-link ${NB.enterSearch} ${NB.searchHover}`\n  }, __jsx(\"img\", {\n    src: \"/svg/searchW.svg\",\n    className: NB.searchIcon,\n    alt: \"search\"\n  }))), __jsx(\"div\", {\n    className: NB.searchHr,\n    style: {\n      backgroundColor: 'white'\n    }\n  }), __jsx(\"input\", {\n    value: props.query,\n    className: NB.searchInput,\n    type: \"text\",\n    onChange: e => props.onQueryChange(e),\n    onKeyPress: e => handleKeyPress(e),\n    placeholder: \"search or enter nothing for all results\"\n  }), __jsx(\"div\", {\n    className: NB.SBSeparator\n  }), __jsx(SkillSugg, {\n    query: props.query,\n    onSuggestionClicked: onSuggestionClicked\n  })), __jsx(UserContainer, null)), __jsx(\"div\", {\n    className: NB.alertBarContainer,\n    style: alertBarStyle\n  }, __jsx(\"div\", {\n    className: NB.message\n  }, props.alertNotif.message), __jsx(\"h2\", {\n    onClick: () => props.resetAlert(),\n    className: NB.close\n  }, \"x\"))), __jsx(\"div\", {\n    className: `${NB.navContainerM} SWM`\n  }, __jsx(\"div\", {\n    className: NB.navBarContainerM\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    className: `${NB.NBBrand} neutralize-link`\n  }, __jsx(\"img\", {\n    src: \"/svg/logo/logoB.svg\",\n    className: NB.NBLogo,\n    alt: \"logo\"\n  }), __jsx(\"h2\", null, \"Unilous\"))), __jsx(\"div\", {\n    className: NB.NBPrimaryUtilities\n  }, __jsx(\"img\", {\n    src: \"/svg/searchSB.svg\",\n    onClick: () => changeUtility('search'),\n    className: NB.PUSearch,\n    alt: \"search\"\n  }), __jsx(\"div\", {\n    onClick: () => changeUtility('menu'),\n    className: `${NB.PUHamburgerContainer} ${NB.PNContainer}`\n  }, __jsx(\"img\", {\n    src: \"/svg/hamburger.svg\",\n    className: NB.PUHamburger,\n    alt: \"menu\"\n  }), __jsx(\"div\", {\n    className: `${pendingNotifStats[0]} ${NB.PNBubbleHamburger}`\n  }, pendingNotifStats[1])))), __jsx(\"div\", {\n    onClick: () => props.resetAlert(),\n    className: NB.alertBarContainer,\n    style: alertBarStyle\n  }, __jsx(\"div\", {\n    className: NB.message\n  }, props.alertNotif.message), __jsx(\"h2\", {\n    className: NB.close\n  }, \"x\")), __jsx(\"div\", {\n    className: NB.navBarSubContainer,\n    style: showWhenSB\n  }, __jsx(\"div\", {\n    className: NB.searchBar\n  }, __jsx(Link, {\n    href: linkToPush,\n    onClick: () => enterQuery()\n  }, __jsx(\"a\", {\n    className: `neutralize-link ${NB.enterSearch} ${NB.searchHover}`\n  }, __jsx(\"img\", {\n    src: \"/svg/searchW.svg\",\n    className: NB.searchIcon,\n    alt: \"search\"\n  }))), __jsx(\"div\", {\n    className: NB.searchHr,\n    style: {\n      backgroundColor: 'white',\n      height: '0'\n    }\n  }), __jsx(\"input\", {\n    value: props.query,\n    className: NB.searchInput,\n    type: \"text\",\n    onChange: e => props.onQueryChange(e),\n    onKeyPress: e => handleKeyPress(e),\n    placeholder: \"search or enter nothing for all results\"\n  }), __jsx(SkillSugg, {\n    query: props.query,\n    onSuggestionClicked: onSuggestionClicked\n  }))), __jsx(ShowInSubNav, null), __jsx(MenuItemToShow, null)));\n}; // NavBar = withRouter(NavBar)\n\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser,\n    token: state.token,\n    alertNotif: state.alertNotif\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    clearToken: bindActionCreators(clearToken, dispatch),\n    resetAlert: bindActionCreators(resetAlert, dispatch)\n  };\n};\n\nclearToken;\nresetAlert;\nexport default connect(mapStateToProps, mapDispatchToProps)(NavBar);","map":null,"metadata":{},"sourceType":"module"}